<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Terminal Programlama Sözlüğü</title>
    <style>
        body {
            background-color: #000000;
            color: #ffffff;
            font-family: 'Courier New', monospace;
            margin: 0;
            padding: 0;
            height: 100vh;
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }
        
        .terminal-body {
            flex: 1;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 20px;
            position: relative;
        }
        
        /* Hamburger Menu */
        .hamburger-menu {
            position: absolute;
            top: 20px;
            right: 20px;
            width: 30px;
            height: 30px;
            cursor: pointer;
            z-index: 1000;
            display: flex;
            flex-direction: column;
            justify-content: space-around;
        }
        
        .hamburger-line {
            width: 100%;
            height: 3px;
            background-color: #ffffff;
            transition: 0.3s;
        }
        
        .hamburger-menu.active .hamburger-line:nth-child(1) {
            transform: rotate(45deg) translate(6px, 6px);
        }
        
        .hamburger-menu.active .hamburger-line:nth-child(2) {
            opacity: 0;
        }
        
        .hamburger-menu.active .hamburger-line:nth-child(3) {
            transform: rotate(-45deg) translate(7px, -6px);
        }
        
        .sidebar {
            position: fixed;
            top: 0;
            right: -350px;
            width: 350px;
            height: 100vh;
            background-color: #111111;
            border-left: 1px solid #333;
            transition: right 0.3s ease;
            z-index: 999;
            padding: 20px;
            box-sizing: border-box;
            overflow-y: auto;
        }
        
        .sidebar.active {
            right: 0;
        }
        
        .sidebar-header {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 20px;
            border-bottom: 1px solid #333;
            padding-bottom: 10px;
        }
        
        .favorite-item {
            background-color: #1a1a1a;
            border: 1px solid #333;
            padding: 10px;
            margin-bottom: 10px;
            cursor: pointer;
            transition: background-color 0.2s;
        }
        
        .favorite-item:hover {
            background-color: #2a2a2a;
        }
        
        .favorite-english {
            font-size: 14px;
            font-weight: bold;
            color: #ffffff;
        }
        
        .favorite-turkish {
            font-size: 12px;
            color: #ccc;
            margin-top: 5px;
        }
        
        .favorite-remove {
            float: right;
            color: #ff6b6b;
            font-size: 16px;
            cursor: pointer;
            margin-top: -2px;
        }
        
        .no-favorites {
            color: #666;
            font-style: italic;
            text-align: center;
            margin-top: 50px;
        }
        
        .search-container {
            position: absolute;
            top: 75px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .search-input {
            background-color: #000;
            color: #ffffff;
            border: 1px solid #ffffff;
            padding: 8px 12px;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            outline: none;
            width: 300px;
        }
        
        .search-btn, .bookmark-btn {
            background-color: #000;
            color: #ffffff;
            border: 1px solid #ffffff;
            padding: 8px 16px;
            font-family: 'Courier New', monospace;
            cursor: pointer;
            font-size: 14px;
            min-width: 80px;
        }
        
        .search-btn:hover, .bookmark-btn:hover {
            background-color: #ffffff;
            color: #000;
        }
        
        .bookmark-btn.favorited {
            background-color: #ffd180;
            color: #000;
        }
        
        .term-display {
            text-align: center;
            max-width: 80%;
            min-height: 400px;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }
        
        .term-english {
            font-size: 36px;
            font-weight: 900;
            color: #ffffff;
            margin-bottom: 10px;
            text-transform: uppercase;
        }

        .term-pronunciation {
            font-size: 14px;
            color: #888;
            margin-bottom: 15px;
        }
        
        .term-turkish {
            font-size: 24px;
            font-weight: 600;
            color: #ffffff;
            margin-bottom: 15px;
        }
        
        .term-category {
            font-size: 14px;
            font-weight: 400;
            color: #ffd180;
            margin-bottom: 20px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        .term-description {
            font-size: 16px;
            font-weight: 300;
            color: #ffffff;
            line-height: 1.6;
            margin-bottom: 20px;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
        }
        
        .term-example {
            font-size: 14px;
            font-weight: 300;
            color: #ffffff;
            font-style: italic;
            margin-bottom: 20px;
        }
        
        .no-results {
            color: #ffffff;
            font-size: 18px;
            text-align: center;
        }
        
        .loading {
            color: #ffffff;
            font-size: 18px;
            text-align: center;
            animation: blink 1s infinite;
        }
        
        @keyframes blink {
            0%, 50% { opacity: 1; }
            51%, 100% { opacity: 0.3; }
        }
        
        .error {
            color: #ff6b6b;
            font-size: 18px;
            text-align: center;
            padding: 20px;
            border: 1px solid #ff6b6b;
            max-width: 500px;
            margin: 0 auto;
        }
        
        .navigation {
            position: absolute;
            bottom: 50px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            align-items: center;
            gap: 30px;
            width: 80%;
            max-width: 600px;
            justify-content: space-between;
        }
        
        .nav-btn {
            background-color: #000;
            color: #ffffff;
            border: none;
            width: 60px;
            height: 60px;
            font-size: 24px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-family: 'Courier New', monospace;
            font-weight: bold;
            flex-shrink: 0;
        }
        
        .nav-btn:hover {
            color: #888;
        }
        
        .nav-btn:disabled {
            opacity: 0.3;
            cursor: not-allowed;
        }
        
        .term-counter {
            font-size: 18px;
            color: #ffffff;
            padding: 10px 20px;
            white-space: nowrap;
        }
        
        .current-number {
            font-weight: 300;
        }
        
        .total-number {
            font-weight: 900;
        }
        
        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 998;
            display: none;
        }
        
        .overlay.active {
            display: block;
        }
        
        @media (max-width:768px){
            .search-input {width:200px;}
            .search-btn, .bookmark-btn {padding: 8px 12px; min-width: 60px;}
            .term-english {font-size:24px;}
            .term-turkish {font-size:18px;}
            .term-description {font-size:14px;}
            .nav-btn {width:50px;height:50px;font-size:20px;}
            .sidebar {width: 100%; right: -100%;}
        }
    </style>
</head>
<body>
    <!-- Hamburger Menu -->
    <div class="hamburger-menu" onclick="toggleSidebar()">
        <div class="hamburger-line"></div>
        <div class="hamburger-line"></div>
        <div class="hamburger-line"></div>
    </div>

    <!-- Overlay -->
    <div class="overlay" onclick="closeSidebar()"></div>

    <!-- Sidebar -->
    <div class="sidebar" id="sidebar">
        <div class="sidebar-header">
            FAVORİ TERİMLER
            <span style="float: right; font-size: 14px; color: #666;" id="favoriteCount">0</span>
        </div>
        <div id="favoritesList">
            <div class="no-favorites">
                Henüz favori terim eklemediniz.<br><br>
                Bir terimi favorilere eklemek için ★ butonunu kullanın.
            </div>
        </div>
    </div>

    <div class="terminal-body">
        <div class="search-container">
            <input type="text" class="search-input" id="searchInput" placeholder="">
            <button class="search-btn" onclick="searchTerms()">SEARCH</button>
            <button class="search-btn" onclick="clearSearch()">CLEAR</button>
            <button class="bookmark-btn" id="bookmarkBtn" onclick="toggleBookmark()">★</button>
        </div>
        
        <div class="term-display" id="termDisplay">
            <div class="loading">
                Veriler yükleniyor...<br>
                Cache kontrol ediliyor...
            </div>
        </div>
        
        <div class="navigation">
            <button class="nav-btn" id="prevBtn" onclick="previousTerm()" aria-label="Önceki terim">◀</button>
            <div class="term-counter">
                <span id="currentIndex" class="current-number">0</span> / <span id="totalTerms" class="total-number">0</span>
            </div>
            <button class="nav-btn" id="nextBtn" onclick="nextTerm()" aria-label="Sonraki terim">▶</button>
        </div>
    </div>

    <script>
        // Global değişkenler
        let allTerms = [];
        let currentTerms = [];
        let currentIndex = 0;
        let isDataLoaded = false;
        let favorites = [];

        // Cache ve API ayarları
        const CACHE_KEY = 'programming_terms_cache';
        const FAVORITES_KEY = 'programming_favorites';
        const CACHE_DURATION = 24 * 60 * 60 * 1000; // 24 saat
        const GITHUB_JSON_URL = 'https://raw.githubusercontent.com/umittasdemir1/Terimler_Sozlugu/refs/heads/main/terms.json';

        // Cache fonksiyonları
        function saveToCache(data) {
            const cacheData = {
                terms: data,
                timestamp: Date.now()
            };
            try {
                localStorage.setItem(CACHE_KEY, JSON.stringify(cacheData));
                console.log('Veriler cache\'e kaydedildi');
            } catch (e) {
                console.error('Cache kaydetme hatası:', e);
            }
        }

        function loadFromCache() {
            try {
                const cached = localStorage.getItem(CACHE_KEY);
                if (cached) {
                    const data = JSON.parse(cached);
                    if (Date.now() - data.timestamp < CACHE_DURATION) {
                        console.log('Veriler cache\'den yüklendi');
                        return data.terms;
                    } else {
                        console.log('Cache süresi dolmuş, yeniden çekiliyor');
                        localStorage.removeItem(CACHE_KEY);
                    }
                }
            } catch (e) {
                console.error('Cache okuma hatası:', e);
                localStorage.removeItem(CACHE_KEY);
            }
            return null;
        }

        // Favori fonksiyonları
        function loadFavorites() {
            try {
                const saved = localStorage.getItem(FAVORITES_KEY);
                if (saved) {
                    favorites = JSON.parse(saved);
                    updateFavoritesList();
                    updateFavoriteCount();
                }
            } catch (e) {
                console.error('Favoriler yükleme hatası:', e);
                favorites = [];
            }
        }

        function saveFavorites() {
            try {
                localStorage.setItem(FAVORITES_KEY, JSON.stringify(favorites));
            } catch (e) {
                console.error('Favoriler kaydetme hatası:', e);
            }
        }

        function toggleBookmark() {
            if (!isDataLoaded || currentTerms.length === 0) return;
            
            const currentTerm = currentTerms[currentIndex];
            const existingIndex = favorites.findIndex(fav => 
                fav.english === currentTerm.english && fav.turkish === currentTerm.turkish
            );
            
            if (existingIndex !== -1) {
                // Favorilerden çıkar
                favorites.splice(existingIndex, 1);
                showMessage('Favorilerden çıkarıldı!');
            } else {
                // Favorilere ekle
                favorites.push({
                    english: currentTerm.english,
                    turkish: currentTerm.turkish,
                    description: currentTerm.description,
                    category: currentTerm.category,
                    categoryTurkish: currentTerm.categoryTurkish,
                    example: currentTerm.example,
                    pronunciation: currentTerm.pronunciation
                });
                showMessage('Favorilere eklendi!');
            }
            
            saveFavorites();
            updateFavoritesList();
            updateFavoriteCount();
            updateBookmarkButton();
        }

        function updateBookmarkButton() {
            if (!isDataLoaded || currentTerms.length === 0) return;
            
            const currentTerm = currentTerms[currentIndex];
            const bookmarkBtn = document.getElementById('bookmarkBtn');
            const isFavorited = favorites.some(fav => 
                fav.english === currentTerm.english && fav.turkish === currentTerm.turkish
            );
            
            if (isFavorited) {
                bookmarkBtn.classList.add('favorited');
                bookmarkBtn.textContent = '★';
            } else {
                bookmarkBtn.classList.remove('favorited');
                bookmarkBtn.textContent = '☆';
            }
        }

        function updateFavoritesList() {
            const favoritesList = document.getElementById('favoritesList');
            
            if (favorites.length === 0) {
                favoritesList.innerHTML = `
                    <div class="no-favorites">
                        Henüz favori terim eklemediniz.<br><br>
                        Bir terimi favorilere eklemek için ★ butonunu kullanın.
                    </div>
                `;
                return;
            }
            
            favoritesList.innerHTML = favorites.map((fav, index) => `
                <div class="favorite-item" onclick="goToFavorite(${index})">
                    <span class="favorite-remove" onclick="removeFavorite(${index}); event.stopPropagation();">×</span>
                    <div class="favorite-english">${fav.english}</div>
                    <div class="favorite-turkish">${fav.turkish}</div>
                </div>
            `).join('');
        }

        function updateFavoriteCount() {
            document.getElementById('favoriteCount').textContent = favorites.length;
        }

        function removeFavorite(index) {
            favorites.splice(index, 1);
            saveFavorites();
            updateFavoritesList();
            updateFavoriteCount();
            updateBookmarkButton();
            showMessage('Favorilerden çıkarıldı!');
        }

        function goToFavorite(index) {
            const favorite = favorites[index];
            
            // Tüm terimlerde bu favoriteyi bul
            const termIndex = allTerms.findIndex(term => 
                term.english === favorite.english && term.turkish === favorite.turkish
            );
            
            if (termIndex !== -1) {
                // Arama temizle ve o terime git
                clearSearch();
                currentIndex = termIndex;
                displayCurrentTerm();
                closeSidebar();
                showMessage(`${favorite.english} terimine gidildi!`);
            }
        }

        // Sidebar fonksiyonları
        function toggleSidebar() {
            const sidebar = document.getElementById('sidebar');
            const hamburger = document.querySelector('.hamburger-menu');
            const overlay = document.querySelector('.overlay');
            
            sidebar.classList.toggle('active');
            hamburger.classList.toggle('active');
            overlay.classList.toggle('active');
        }

        function closeSidebar() {
            const sidebar = document.getElementById('sidebar');
            const hamburger = document.querySelector('.hamburger-menu');
            const overlay = document.querySelector('.overlay');
            
            sidebar.classList.remove('active');
            hamburger.classList.remove('active');
            overlay.classList.remove('active');
        }

        // Mesaj gösterme
        function showMessage(text) {
            // Basit bir toast mesajı
            const existingMsg = document.querySelector('.toast-message');
            if (existingMsg) existingMsg.remove();
            
            const msg = document.createElement('div');
            msg.className = 'toast-message';
            msg.style.cssText = `
                position: fixed;
                top: 20px;
                left: 50%;
                transform: translateX(-50%);
                background: #333;
                color: white;
                padding: 10px 20px;
                border-radius: 5px;
                z-index: 10000;
                font-family: 'Courier New', monospace;
            `;
            msg.textContent = text;
            document.body.appendChild(msg);
            
            setTimeout(() => msg.remove(), 2000);
        }

        // Telaffuz fonksiyonu - temel telaffuz üreteci
        function getPronunciation(word) {
            const pronMap = {
                "Algorithm":"al-go-ri-tm","API":"ey-pi-ay","Array":"a-rey","Backend":"bek-end","Boolean":"bu-li-an",
                "Bug":"bag","Cache":"keş","Class":"klas","Compiler":"kom-pay-lır","CSS":"si-es-es","Database":"dey-ta-beys",
                "Debug":"di-bag","DOM":"di-o-em","Framework":"freym-vörk","Frontend":"fır-ont-end","Function":"fank-şın",
                "Git":"git","HTML":"eyç-ti-em-el","HTTP":"eyç-ti-ti-pi","IDE":"ay-di-i","JavaScript":"ca-va-sik-ript",
                "JSON":"cey-sın","Library":"lay-bre-ri","Loop":"lup","Method":"me-tod","Object":"ob-cekt","Parameter":"pa-ra-mi-tır",
                "Python":"pay-ton","Repository":"ri-po-zi-to-ri","Server":"sör-vır","SQL":"es-kyo-el","String":"si-tring",
                "Variable":"ver-i-yı-bıl","Version Control":"vör-şın kon-trol","Web Development":"veb di-ve-lop-mınt",
                "Binary":"bay-ne-ri","Bootstrap":"but-si-trap","Client":"klay-ınt","Cloud Computing":"klaud kom-pyu-ting",
                "Data Structure":"dey-ta si-trak-çır","DevOps":"dev-ops","Docker":"dok-kır","Encryption":"in-kırp-şın",
                "Firebase":"fay-ır-beys","GitHub":"git-hab","Hash":"heş","Interface":"in-tır-feys","jQuery":"cey-kvo-ri",
                "Kubernetes":"ku-ber-ne-tis","Linux":"li-naks","Machine Learning":"mı-şin lör-ning","Node.js":"nod-cey-es",
                "OOP":"o-o-pi","PHP":"pi-eyç-pi","React":"ri-ekt","REST API":"rest ey-pi-ay","Software":"soft-ver",
                "TypeScript":"tayp-sik-ript","URL":"yu-ar-el","Vue.js":"vyu-cey-es","Webpack":"veb-pek","XML":"eks-em-el"
            };
            return pronMap[word] || word.toLowerCase().replace(/[^a-z]/g, "-");
        }

        // Ana veri yükleme fonksiyonu
        async function loadTermsData() {
            // Önce cache'den dene
            const cachedData = loadFromCache();
            if (cachedData) {
                allTerms = cachedData;
                currentTerms = [...allTerms];
                isDataLoaded = true;
                displayCurrentTerm();
                return;
            }

            // Cache'de yoksa GitHub'dan çek
            await loadTermsFromGitHub();
        }

        // GitHub'dan JSON verisini çek
        async function loadTermsFromGitHub() {
            try {
                const response = await fetch(GITHUB_JSON_URL);
                
                if (!response.ok) {
                    throw new Error(`HTTP Hatası: ${response.status} - ${response.statusText}`);
                }
                
                const data = await response.json();
                
                // JSON yapısını kontrol et
                if (!Array.isArray(data)) {
                    throw new Error('JSON formatı hatalı: Veri bir dizi olmalı');
                }
                
                // Hatalı verileri filtrele
                allTerms = data.filter(term => 
                    term && 
                    term.english && term.english.trim() !== '' &&
                    term.turkish && term.turkish.trim() !== ''
                );
                
                currentTerms = [...allTerms];
                isDataLoaded = true;
                
                // Cache'e kaydet
                saveToCache(allTerms);
                
                console.log(`${allTerms.length} terim başarıyla yüklendi`);
                displayCurrentTerm();
                
            } catch (error) {
                console.error('Veri yükleme hatası:', error);
                showError(`Veriler yüklenemedi: ${error.message}`);
            }
        }

        // Hata mesajı göster
        function showError(message) {
            document.getElementById('termDisplay').innerHTML = `
                <div class="error">
                    <strong>HATA!</strong><br><br>
                    ${message}<br><br>
                    <small>
                        • İnternet bağlantınızı kontrol edin<br>
                        • GitHub repository'sine erişim var mı kontrol edin<br>
                        • JSON dosyası formatı doğru mu kontrol edin<br>
                        • Birkaç saniye sonra sayfayı yenileyin
                    </small>
                </div>
            `;
            updateNavigation();
        }

        // Mevcut terimi göster
        function displayCurrentTerm() {
            if (!isDataLoaded) {
                return;
            }

            if (currentTerms.length === 0) {
                document.getElementById('termDisplay').innerHTML = `
                    <div class="no-results">
                        ARAMA SONUCU YOK!<br><br>
                        Arama kriterlerinizi değiştirin.
                    </div>
                `;
                updateNavigation();
                return;
            }

            const term = currentTerms[currentIndex];
            
            // JSON'dan gelen veriyi kontrol et
            if (!term.english || !term.turkish) {
                console.error('Hatalı terim verisi:', term);
                return;
            }

            document.getElementById('termDisplay').innerHTML = `
                <div class="term-english">${term.english}</div>
                <div class="term-pronunciation">(${term.pronunciation || getPronunciation(term.english)})</div>
                <div class="term-turkish">${term.turkish}</div>
                <div class="term-category">${term.categoryTurkish || 'Genel'} (${term.category || 'General'})</div>
                <div class="term-description">${term.description || 'Açıklama bulunmuyor.'}</div>
                <div class="term-example">${term.example || ''}</div>
            `;
            
            updateNavigation();
            updateBookmarkButton();
        }

        // Navigasyon güncelle
        function updateNavigation() {
            document.getElementById('currentIndex').textContent = currentTerms.length > 0 ? currentIndex + 1 : 0;
            document.getElementById('totalTerms').textContent = currentTerms.length;
            
            // Butonları etkinleştir/devre dışı bırak
            const prevBtn = document.getElementById('prevBtn');
            const nextBtn = document.getElementById('nextBtn');
            
            prevBtn.disabled = !isDataLoaded || currentTerms.length === 0;
            nextBtn.disabled = !isDataLoaded || currentTerms.length === 0;
        }

        // Sonraki terim
        function nextTerm() {
            if (!isDataLoaded || currentTerms.length === 0) return;
            
            if (currentIndex < currentTerms.length - 1) {
                currentIndex++;
            } else {
                currentIndex = 0; // Son terimden sonra başa dön
            }
            displayCurrentTerm();
        }

        // Önceki terim
        function previousTerm() {
            if (!isDataLoaded || currentTerms.length === 0) return;
            
            if (currentIndex > 0) {
                currentIndex--;
            } else {
                currentIndex = currentTerms.length - 1; // İlk terimden önce sona git
            }
            displayCurrentTerm();
        }

        // Terim ara
        function searchTerms() {
            if (!isDataLoaded) {
                showMessage('Veriler henüz yüklenmedi. Lütfen bekleyin.');
                return;
            }

            const searchText = document.getElementById('searchInput').value.toLowerCase().trim();
            
            if (searchText === '') {
                currentTerms = [...allTerms];
            } else {
                currentTerms = allTerms.filter(term => 
                    (term.english && term.english.toLowerCase().includes(searchText)) ||
                    (term.turkish && term.turkish.toLowerCase().includes(searchText)) ||
                    (term.description && term.description.toLowerCase().includes(searchText)) ||
                    (term.categoryTurkish && term.categoryTurkish.toLowerCase().includes(searchText)) ||
                    (term.category && term.category.toLowerCase().includes(searchText))
                );
            }
            
            currentIndex = 0;
            displayCurrentTerm();
        }

        // Aramayı temizle
        function clearSearch() {
            if (!isDataLoaded) return;
            
            document.getElementById('searchInput').value = '';
            currentTerms = [...allTerms];
            currentIndex = 0;
            displayCurrentTerm();
        }

        // Klavye kısayolları
        document.addEventListener('keydown', function(e) {
            if (!isDataLoaded) return;
            
            // Sidebar açıkken klavye kısayollarını devre dışı bırak
            if (document.getElementById('sidebar').classList.contains('active')) {
                if (e.key === 'Escape') {
                    closeSidebar();
                }
                return;
            }
            
            switch(e.key) {
                case 'ArrowLeft':
                    e.preventDefault();
                    previousTerm();
                    break;
                case 'ArrowRight':
                    e.preventDefault();
                    nextTerm();
                    break;
                case 'Enter':
                    if (document.activeElement === document.getElementById('searchInput')) {
                        searchTerms();
                    }
                    break;
                case 'Escape':
                    clearSearch();
                    break;
                case 'f':
                case 'F':
                    if (!document.activeElement === document.getElementById('searchInput')) {
                        e.preventDefault();
                        toggleBookmark();
                    }
                    break;
            }
        });

        // Enter tuşu ile arama
        document.getElementById('searchInput').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                searchTerms();
            }
        });

        // Sayfa yüklendiğinde çalış
        window.addEventListener('load', function() {
            console.log('Sayfa yüklendi, veriler kontrol ediliyor...');
            loadFavorites();
            loadTermsData();
        });

        // Hata durumunda sayfa yenileme seçeneği
        window.addEventListener('error', function(e) {
            console.error('JavaScript Hatası:', e.error);
        });

        // Network hatalarını yakala
        window.addEventListener('unhandledrejection', function(e) {
            console.error('Promise Hatası:', e.reason);
        });
    </script>
</body>
</html>
